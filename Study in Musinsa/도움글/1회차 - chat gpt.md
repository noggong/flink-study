### 아파치 플링크로 하는 스트림 데이터 처리 - 1장 학습 자료

#### 1. 스트림 데이터 처리의 기본 개념

**스트림 데이터 처리(Stream Data Processing)**는 실시간으로 생성되는 데이터의 흐름을 지속적으로 처리하는 방식입니다. 이는 전통적인 배치 데이터 처리(batch processing)와는 다른 데이터 처리 패러다임으로, 데이터를 저장하고 나중에 처리하는 대신 데이터가 도착하는 즉시 처리합니다.

**핵심 개념:**

- **실시간 처리:** 데이터를 생성과 동시에 처리하여 실시간 분석이 가능.
- **연속적인 데이터 흐름:** 데이터는 고정된 파일 단위가 아니라 지속적으로 발생.
- **낮은 지연(latency):** 즉각적인 반응을 요구하는 시스템에서 필수적.
- **데이터 이벤트:** 스트림 데이터는 시간과 함께 발생하는 이벤트의 연속으로 간주됩니다.

#### 2. 플링크의 특징

Apache Flink는 스트림 데이터 처리에 특화된 분산 데이터 처리 엔진으로, 다음과 같은 특징을 갖습니다:

- **실시간 스트림 처리:** Flink는 데이터를 스트림 단위로 처리하며 실시간 응답을 제공합니다.
- **배치 처리 지원:** 스트림을 기반으로 배치 작업도 처리 가능.
- **상태 기반 처리(Stateful Processing):** 스트림 데이터에서 상태를 관리하고 활용할 수 있음.
- **Event-time 처리:** 데이터의 발생 시간을 기준으로 작업 처리 가능.
- **고가용성과 확장성:** 장애 복구 및 클러스터 확장을 통해 안정적으로 작동.

#### 3. 플링크의 아키텍처 소개

Apache Flink의 아키텍처는 분산 시스템 구조를 기반으로 설계되었습니다. 주요 구성 요소는 다음과 같습니다:

1. **JobManager:**
    
    - 작업(Job)을 관리하고 조정하는 역할을 담당.
    - 작업 스케줄링, 체크포인팅(checkpointing), 장애 복구 수행.
2. **TaskManager:**
    
    - 실제 데이터 처리 작업을 실행.
    - JobManager의 지시에 따라 작업을 실행하고 리소스를 관리.
3. **Flink Runtime:**
    
    - 데이터를 물리적으로 스트림으로 처리하는 엔진.
    - 다양한 소스와 싱크(출력)를 지원하며, 데이터 흐름의 병렬 처리 가능.
4. **Checkpointing:**
    
    - 상태 기반 스트림 처리의 중요한 기능으로, 데이터 손실 방지 및 장애 복구를 가능하게 함.

#### 4. 플링크의 핵심 설계 철학: "배치는 데이터가 유한한 스트림이다"

Apache Flink의 설계 철학은 다음과 같이 요약됩니다:

- **스트림 우선 접근법:** Flink는 모든 데이터가 스트림으로 발생한다고 가정합니다.
- **배치는 스트림의 특수한 형태:** 유한한 데이터 스트림은 배치 데이터로 간주됩니다.
    - 예를 들어, 파일에서 데이터를 처리하는 작업은 고정된 시작과 끝을 가진 스트림으로 볼 수 있습니다.
- 이 철학은 스트림과 배치의 통합을 가능하게 하며, 동일한 코드베이스에서 두 작업을 모두 처리할 수 있게 합니다.

#### 5. 마이크로서비스 아키텍처와 플링크의 연관성

마이크로서비스 아키텍처는 애플리케이션을 독립적이고 작게 나누어 배포 및 관리할 수 있게 설계합니다. Flink는 마이크로서비스와 자연스럽게 통합될 수 있습니다:

- **데이터 스트림을 통해 서비스 연결:** 마이크로서비스 간의 데이터 교환을 스트림으로 관리.
- **독립적이고 확장 가능한 처리:** 개별 서비스를 위한 실시간 데이터 처리 가능.
- **이벤트 중심 설계:** Flink는 이벤트 기반 아키텍처에서 핵심 역할을 수행합니다.
- **실시간 분석:** 마이크로서비스에서 생성된 데이터를 실시간으로 분석하여 의사 결정을 지원합니다.

#### 6. 스트림 처리와 배치 처리의 차이점

|특징|스트림 처리|배치 처리|
|---|---|---|
|**데이터 특성**|실시간, 연속적인 데이터 흐름|고정된 크기의 데이터 집합|
|**지연(latency)**|낮은 지연|비교적 높은 지연|
|**데이터 크기**|무한|유한|
|**처리 단위**|이벤트 단위|파일 또는 블록 단위|
|**사용 사례**|실시간 모니터링, 알림 시스템|데이터 분석, 정기 보고서 생성|

#### 7. 상태가 있는 스트림 처리의 중요성

**상태(Stateful Processing)**는 Flink의 가장 강력한 기능 중 하나로, 데이터 스트림 처리 중 상태를 유지하고 이를 활용하여 복잡한 처리를 수행할 수 있습니다.

**상태 처리의 필요성:**

- **이전 데이터와의 연관성:** 이벤트 간의 관계를 유지해야 할 때.
- **중간 결과 저장:** 데이터 집계를 실시간으로 처리하며 중간 결과를 저장.
- **재시작 시 데이터 복원:** 장애 발생 시 상태를 복원하여 작업을 이어나감.

**Flink에서 상태 관리:**

- **Keyed State:** 특정 키에 대해 상태를 관리.
- **Operator State:** 연산자(operator) 단위로 상태를 관리.
- **Checkpointing:** 주기적으로 상태를 저장하여 장애 복구 가능.

#### 8. 질문에 대한 답변

1. **아파치 플링크의 핵심 설계 철학은 무엇이며, 이를 통해 배치 처리를 어떻게 이해할 수 있나요?**
    
    - Flink는 "배치는 유한한 스트림이다"라는 설계 철학을 기반으로, 모든 데이터를 스트림으로 간주합니다. 이를 통해 배치 처리도 스트림 처리의 특수한 형태로 처리할 수 있습니다. 배치 데이터는 시작과 끝이 있는 유한한 스트림으로 보며, 동일한 처리 모델에서 일관되게 작업을 수행합니다.
2. **스트림 처리와 배치 처리의 주요 차이점은 무엇인가요?**
    
    - 스트림 처리는 실시간 데이터 흐름을 지속적으로 처리하며, 낮은 지연과 무한 데이터를 다룹니다. 반면 배치 처리는 고정된 크기의 데이터 집합을 처리하며 지연 시간이 상대적으로 길고 데이터가 유한합니다.
3. **상태가 있는 스트림 처리가 왜 중요한가요?**
    
    - 상태를 유지하면 이벤트 간의 연관성을 관리할 수 있어, 복잡한 데이터 집계 및 분석이 가능합니다. 또한, 장애 발생 시 상태를 복원할 수 있어 시스템 안정성을 높이고 데이터 손실을 방지합니다.
4. **마이크로서비스 아키텍처에서 아파치 플링크는 어떤 역할을 할 수 있을까요?**
    
    - Flink는 마이크로서비스 간 데이터 스트림을 연결하고 실시간 데이터 처리를 통해 서비스 간의 효율적인 데이터 교환 및 분석을 지원합니다. 이벤트 중심 설계에서 중요한 역할을 수행하며, 실시간 의사결정을 위한 데이터 분석을 제공합니다.
5. **플링크에서 제공하는 데이터 처리 방식에는 어떤 것이 있나요?**
    
    - Flink는 실시간 스트림 처리와 배치 처리를 모두 지원하며, 상태 기반 처리, 이벤트 시간 처리, 윈도우 처리 등 다양한 방식을 제공합니다.
6. **플링크는 "상태가 있는 스트림 처리"를 완벽하게 구현했다고 평가받고 있습니다. 상태 관리 측면에서 플링크의 강점은 무엇이며, 다른 스트림 처리 기술과 비교했을 때 어떤 차이가 있을까요?**
    
    - Flink는 Keyed State와 Operator State를 통해 정교한 상태 관리를 지원하며, Checkpointing과 Savepoint를 통해 장애 복구를 용이하게 합니다. 다른 기술에 비해 강력한 상태 관리와 확장성을 제공합니다.
7. **플링크는 "이벤트 시간"이라는 개념을 도입하여 데이터 처리의 정확성을 높입니다. 이벤트 시간과 처리 시간의 차이점은 무엇이며, 각각 어떤 상황에서 유용하게 사용될 수 있을까요?**
    
    - 이벤트 시간(Event Time)은 데이터가 생성된 실제 시간이고, 처리 시간(Processing Time)은 데이터가 시스템에서 처리된 시간입니다. 이벤트 시간은 데이터의 정확한 타임스탬프가 중요한 분석에, 처리 시간은 시스템 지연에 민감하지 않은 작업에 유용합니다.
8. **플링크의 "워터마크"는 이벤트 시간 윈도우에서 중요한 역할을 합니다. 워터마크의 개념과 기능을 설명하고, 워터마크를 너무 빠듯하게 또는 너무 느슨하게 설정했을 때 발생할 수 있는 문제점을 설명해 보세요.**
    
    - 워터마크는 이벤트 시간 기반 윈도우에서 데이터 처리를 종료할 시점을 정의합니다. 워터마크가 너무 빠듯하면 지연 데이터가 처리되지 않을 수 있고, 너무 느슨하면 전체 처리 지연이 증가할 수 있습니다.

### 결론

Apache Flink는 스트림 처리와 배치 처리의 경계를 허물고, 실시간 데이터 분석과 상태 기반 처리를 가능하게 하는 강력한 분산 데이터 처리 플랫폼입니다. 이 강의에서 학습한 내용은 Flink의 기본 개념을 이해하고, 실무에서 이를 활용하기 위한 탄탄한 기반을 제공합니다.